(()=>{"use strict";const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots");for(let o=0;o<e.length;o++){const e=document.createElement("div");e.className="dot",t.appendChild(e)}(function(e){let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds"),n=document.querySelector("#timer-day"),c=setInterval(r,1e3);function r(){let r=function(){let t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),l=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60)%24,minutes:l,seconds:o,day:Math.floor(t/60/60/24)}}(),a=("0"+r.seconds).slice(-2),s=("0"+r.minutes).slice(-2),u=("0"+r.hours).slice(-2),i=("0"+r.day).slice(-2);t.textContent=u,o.textContent=s,l.textContent=a,n.textContent=i,r.timeRemaining<0&&(n.textContent="00",t.textContent="00",o.textContent="00",l.textContent="00",clearInterval(c))}r()})("30 september 2021"),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu");e.addEventListener("click",(e=>{let o=e.target;o.closest(".menu")||o.closest(".close-btn")||o.closest("menu>ul>li>a")?t.classList.toggle("active-menu"):(o=o.closest("menu"),o||t.classList.remove("active-menu"))}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");let o,l=-100;const n=document.querySelector(".popup-content");let c=!1,r=function(){l++,l<150&&window.screen.width>768?n.style.top=l+"px":clearInterval(o)};o=setInterval(r,15),t.forEach((t=>{t.addEventListener("click",(()=>{l=-100,e.style.display="block",setInterval(r,15),c=!1}))})),e.addEventListener("click",(t=>{let l=t.target;l.classList.contains("popup-close")?e.style.display="none":(l=l.closest(".popup-content"),l||(e.style.display="none",clearInterval(o)))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;console.log(l),l=l.closest(".service-header-tab"),console.log(l),l&&t.forEach(((e,n)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(o[l].classList.remove("d-none"),t[l].classList.add("active")):(o[l].classList.add("d-none"),t[l].classList.remove("active"))})(n)}))}))})(),(()=>{const t=document.querySelectorAll(".dot"),o=document.querySelector(".portfolio-content");let l,n=0;const c=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},a=()=>{c(e,n,"portfolio-item-active"),c(t,n,"dot-active"),n++,n>=e.length&&(n=0),r(e,n,"portfolio-item-active"),r(t,n,"dot-active")},s=(e=3e3)=>{l=setInterval(a,e)};o.addEventListener("click",(o=>{o.preventDefault();let l=o.target;l.matches(".portfolio-btn, .dot")&&(c(e,n,"portfolio-item-active"),c(t,n,"dot-active"),l.matches("#arrow-right")?n++:l.matches("#arrow-left")?n--:l.matches(".dot")&&t.forEach(((e,t)=>{e===l&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),r(e,n,"portfolio-item-active"),r(t,n,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)})(),document.querySelectorAll(".command__photo").forEach((e=>{let t=e.src;e.addEventListener("mouseover",(e=>{e.target,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),(()=>{const e=document.querySelectorAll(".calc-block input"),t=document.querySelectorAll("[name = user_name]"),o=document.getElementById("form2-message"),l=document.querySelectorAll("[type = email]"),n=document.querySelectorAll("[type = tel]"),c=document.querySelectorAll("form button"),r=document.querySelectorAll("input");e.forEach((e=>{e.addEventListener("input",(()=>{let t=e.value;e.value=t.replace(/\D/g,"")}))})),t.forEach((e=>{e.addEventListener("input",(()=>{let t=e.value;e.value=t.match(/[А-ЯЁа-яё\s-]+/gi)})),e.addEventListener("blur",(()=>{let t=e.value;if(/^[\s-,]/.test(t)||/[\s-,]$/.test(t)){e.value=t.replace(/^[\s-,]/g,"").trim();let o=e.value;e.value=o.replace(/[\s-,]$/g,"").trim()}let o=e.value.split(" "),l=[];if(o.forEach((e=>{if(""!==e){let t=e.toLowerCase();const o=t[0].toUpperCase()+t.slice(1);l.push(o),console.log(l)}})),e.value=l.join(" "),/-/.test(o)){let t=e.value.split("-");console.log(t);let o=[];t.forEach((e=>{if(""!==e){let t=e.toLowerCase();const l=t[0].toUpperCase()+t.slice(1);console.log(l),o.push(l),console.log(o)}})),e.value=o.join("-")}}))})),o.addEventListener("input",(()=>{let e=o.value;o.value=e.match(/[А-ЯЁа-яё\s-,:;\.\?!]+/gi)})),l.forEach((e=>{e.addEventListener("input",(()=>{let t=e.value;e.value=t.match(/[A-Za-z@_!~'\.\*]+/gi)})),e.addEventListener("blur",(()=>{const t=e.value.match(/\w+@\w+\.\w{2,3}/g);t?e.value=t:c.forEach((e=>{console.log(e),e.disabled=!0}))}))})),n.forEach((e=>{e.addEventListener("input",(()=>{let t=e.value;e.value=t.match(/[0-9-\(\)\+]+/g)})),e.addEventListener("blur",(()=>{const t=e.value.match(/\+?[78]([-()]*\d){10}/g);t?(e.value=t,e.disabled=!1):c.forEach((e=>{console.log(e),e.disabled=!0}))}))})),r.forEach((e=>{e.addEventListener("blur",(()=>{let t=e.value;if(/^[\s-]/.test(t)||/[\s-]$/.test(t)){e.value=t.replace(/^[\s-]/g,"").trim();let o=e.value;e.value=o.replace(/[\s-]$/g,"").trim()}e.value=t.replace(/\s+/g," ").trim();let o=e.value;e.value=o.replace(/-+/g,"-").trim()}),!0)}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),n=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,s=1;const u=o.options[o.selectedIndex].value,i=+l.value;c.value>1&&(a+=(c.value-1)/10),n.value&&n.value<5?s*=2:n.value&&n.value<10&&(s*=1.5),u&&i&&(console.log(e*u*i),t=e*u*i*a*s),r.textContent=t})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;",t.style.color="#ffffff",e.forEach((e=>{e.addEventListener("submit",(l=>{l.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const n=new FormData(e);let c={};for(let e of n.entries())c[e[0]]=e[1];o(c).then((e=>{if(200!==e.status)throw new Error("status network not 200");t.textContent="Спасибо мы скоро с вами свяжемся!",setTimeout((()=>{t.textContent=""}),3e3)})).catch((()=>{t.textContent="Что то пошло не так...",setTimeout((()=>{t.textContent=""}),3e3)})),o(c),document.querySelectorAll("form input").forEach((e=>{""!==c&&(e.value="")}))}))}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})})()})();